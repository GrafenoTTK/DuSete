(function(){
'use strict';
if(window.MirrorCaptureLoaded)return;
window.MirrorCapture={
events:[],
isCapturing:true,
debounceMs:100,
lastClickTime:{},
shouldProcessClick:function(e){
const t=this.getElementId(e),n=Date.now();
return!(this.lastClickTime[t]&&n-this.lastClickTime[t]<this.debounceMs)&&(this.lastClickTime[t]=n,!0)
},
getElementId:function(e){
const t=e.getBoundingClientRect();
return[e.tagName,e.id||'',e.className||'',Math.round(t.left),Math.round(t.top)].join('_')
},
addEvent:function(e,t,n){
if(!this.isCapturing)return;
if(['click','mousedown','mouseup'].includes(e)&&!this.shouldProcessClick(t))return;
const i={type:e,element:this.captureElementData(t,n),event:{clientX:n.clientX||0,clientY:n.clientY||0,button:n.button||0}};
window.mirrorEventQueue=window.mirrorEventQueue||[],
window.mirrorEventQueue.length>50&&window.mirrorEventQueue.shift(),
window.mirrorEventQueue.push(JSON.stringify(i))
},
captureElementData:function(e,t){
const n=e.getBoundingClientRect();
return{tag:e.tagName.toLowerCase(),id:e.id||'',className:e.className||'',rect:{centerX:n.left+n.width/2,centerY:n.top+n.height/2},url:window.location.href,timestamp:Date.now()}
}
};
['click','mousedown','mouseup'].forEach(e=>{
document.addEventListener(e,function(t){
t.isTrusted&&window.MirrorCapture.addEvent(e,t.target,t)
},!0)
});
window.MirrorCaptureLoaded=!0;
console.log('ðŸŽ® Mirror Capture carregado')
})();
